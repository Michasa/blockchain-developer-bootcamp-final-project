(this["webpackJsonpaccountabil-eth-y"]=this["webpackJsonpaccountabil-eth-y"]||[]).push([[0],{255:function(e,t){},257:function(e,t){},261:function(e,t){},262:function(e,t){},288:function(e,t){},290:function(e,t){},301:function(e,t){},303:function(e,t){},313:function(e,t){},315:function(e,t){},330:function(e,t){},363:function(e,t){},364:function(e,t){},432:function(e,t){},434:function(e,t){},439:function(e,t){},441:function(e,t){},448:function(e,t){},460:function(e,t){},463:function(e,t){},468:function(e,t){},545:function(e,t,n){},553:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(225),s=n.n(r),c=n(10),i=n(13),o=n(12),u=n(3),l=n.n(u),d=n(64),p=n(65),j=n(230),m=n(18),b=n(26),h=n.n(b),f=n(23),y=n.n(f),x=[{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"payout",type:"uint256"},{indexed:!1,internalType:"uint256",name:"penalty",type:"uint256"},{indexed:!1,internalType:"bool",name:"sentToOwner",type:"bool"},{indexed:!1,internalType:"bool",name:"sentToNominee",type:"bool"},{indexed:!1,internalType:"bool",name:"isPromiseActive",type:"bool"}],name:"cashOutSummary",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"check_open",type:"uint256"},{indexed:!1,internalType:"uint256",name:"check_closed",type:"uint256"}],name:"checkTimesUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"pledge_pot",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reward_pot",type:"uint256"},{indexed:!1,internalType:"uint256",name:"penalty_pot",type:"uint256"}],name:"moneyPotUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"nominee_address",type:"address"}],name:"nomineeSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"days_missed",type:"uint256"},{indexed:!1,internalType:"uint256",name:"penalty_amount",type:"uint256"}],name:"penaltyApplied",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32[]",name:"commitments",type:"bytes32[]"},{indexed:!1,internalType:"uint256",name:"pledge_pot",type:"uint256"},{indexed:!1,internalType:"uint256",name:"promise_deadline",type:"uint256"},{indexed:!1,internalType:"uint256",name:"checks_left",type:"uint256"}],name:"promiseSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"checks_left",type:"uint256"},{indexed:!1,internalType:"uint256",name:"last_checked",type:"uint256"}],name:"submissionAccepted",type:"event"},{inputs:[],name:"check_closed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"check_open",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"contract_creation",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"isPromiseActive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"nominee_account",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"promise_deadline",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"requester",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"nominee",type:"address"}],name:"setNominee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"my_commitments",type:"bytes32[]"},{internalType:"uint256",name:"my_wager",type:"uint256"},{internalType:"uint256",name:"my_deadline",type:"uint256"}],name:"activatePromise",outputs:[],stateMutability:"payable",type:"function",payable:!0},{inputs:[{internalType:"bool",name:"commitments_fulfiled",type:"bool"},{internalType:"uint256",name:"time_submitted",type:"uint256"}],name:"checkCommitments",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"cashOut",outputs:[],stateMutability:"payable",type:"function",payable:!0},{inputs:[],name:"getPromiseDetails",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"},{internalType:"bytes32[]",name:"",type:"bytes32[]"},{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"getPotsDetails",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0}],O=new y.a(y.a.givenProvider),v=new O.eth.Contract([{inputs:[{internalType:"address",name:"deployed_contract",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"",type:"address"}],name:"log",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"contract_address",type:"address"}],name:"newContractCreated",type:"event"},{inputs:[],name:"contracts_deployed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"createContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"findMyContracts",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function",constant:!0}],"0xd9CC78D2fDd5941C4acb187E7527Bc0DB5B79D93"),w=new y.a(y.a.givenProvider).utils,g=w.isAddress,k=w.toBN,A=w.asciiToHex,C=w.hexToUtf8,P=function(e){return(Math.round(100*e)/100).toFixed(2)},T=function(e){return!(!g(e)||k(e).isZero())},D=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.methods.nominee_account().call();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.methods.isPromiseActive().call();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.methods.owner().call();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.methods.promise_deadline().call();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.methods.check_open().call();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.methods.check_closed().call();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=n(1),H=new y.a(y.a.givenProvider),I=window.ethereum,U=Object(a.createContext)(),W={walletAddress:null,contractAddresses:[]},Y={address:null,owner:null,nominatedAddress:null,isPromiseActive:null,promiseDeadline:null,checkOpen:null,checkClose:null},q=function(e){var t=e.children,n=Object(a.useState)(!1),r=Object(o.a)(n,2),s=r[0],c=r[1],u=Object(a.useState)(W),d=Object(o.a)(u,2),p=d[0],b=d[1],f=Object(a.useState)(Y),y=Object(o.a)(f,2),O=y[0],w=y[1];I&&I.on("accountsChanged",(function(e){e[0]&&A()})),Object(a.useEffect)((function(){k()}),[]);var g=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.request({method:"eth_requestAccounts"});case 2:(t=e.sent)&&(n={walletAddress:t[0],contractAddresses:[]},b(n),localStorage.removeItem("Acc_UserDetails"),localStorage.setItem("Acc_UserDetails",JSON.stringify(n)));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("Acc_UserDetails")){e.next=3;break}return e.abrupt("return");case 3:n=JSON.parse(t),a=n.walletAddress,r=n.contractAddresses,I.request({method:"eth_requestAccounts"}).then((function(e){a===e[0]?b({walletAddress:a,contractAddresses:r}):A()}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(W),w(Y),localStorage.removeItem("Acc_UserDetails");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,v.methods.createContract().send({from:p.walletAddress}).on("error",(function(e,t){c(!1),console.error("error receipt",t)})).then((function(e){c(!1),w(Y);var t=e.events.newContractCreated.returnValues.contract_address;return t&&q(t),e}));case 3:if(!(t=e.sent)){e.next=7;break}return n=t.transactionHash,a=t.events,e.abrupt("return",{transactionHash:n,events:a});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.methods.findMyContracts().call({from:p.walletAddress});case 2:(t=e.sent).length&&(n=Object(m.a)(Object(m.a)({},p),{},{contractAddresses:Object(j.a)(t)}),b(n),localStorage.removeItem("Acc_UserDetails"),localStorage.setItem("Acc_UserDetails",JSON.stringify(n)));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H.utils.isAddress(t)){e.next=2;break}return e.abrupt("return");case 2:return(n=new H.eth.Contract(x,t))||console.error("couldnt create contract instance"),e.t0=w,e.t1=m.a,e.t2=Object(m.a)({},O),e.t3={},e.t4=n._address,e.next=11,_(n);case 11:return e.t5=e.sent,e.next=14,D(n);case 14:return e.t6=e.sent,e.next=17,S(n);case 17:return e.t7=e.sent,e.next=20,N(n);case 20:return e.t8=e.sent,e.next=23,M(n);case 23:return e.t9=e.sent,e.next=26,F(n);case 26:e.t10=e.sent,e.t11=n,e.t12={address:e.t4,owner:e.t5,nominatedAddress:e.t6,isPromiseActive:e.t7,promiseDeadline:e.t8,checkOpen:e.t9,checkClose:e.t10,instance:e.t11},e.t13=(0,e.t1)(e.t2,e.t3,e.t12),(0,e.t0)(e.t13);case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(i.a)(l.a.mark((function e(t){var n,a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),n=O.instance,e.next=4,n.methods.setNominee(t).send({from:p.walletAddress}).on("error",(function(e,t){c(!1),console.error("error receipt",t)})).then((function(e){return c(!1),B(),e}));case 4:if(!(a=e.sent)){e.next=8;break}return r=a.transactionHash,s=a.events,e.abrupt("return",{transactionHash:r,events:s});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(i.a)(l.a.mark((function e(t){var n,a,r,s,o,u,d,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.instance,c(!0),a=t.commitments,r=t.dailyWager,s=t.deadline,o=t.totalPledgeAmount,e.next=5,n.methods.activatePromise(a,r,s).send({from:p.walletAddress,value:o}).on("error",(function(e,t){c(!1),console.error("error receipt",t)})).then(function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!1),B(),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:if(!(u=e.sent)){e.next=10;break}return d=u.transactionHash,j=u.events,console.log(j),e.abrupt("return",{transactionHash:d,events:j});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.instance,e.t0=w,e.t1=m.a,e.t2=Object(m.a)({},O),e.t3={},e.next=7,D(t);case 7:return e.t4=e.sent,e.next=10,S(t);case 10:return e.t5=e.sent,e.next=13,N(t);case 13:return e.t6=e.sent,e.next=16,M(t);case 16:return e.t7=e.sent,e.next=19,F(t);case 19:e.t8=e.sent,e.t9={nominatedAddress:e.t4,isPromiseActive:e.t5,promiseDeadline:e.t6,checkOpen:e.t7,checkClose:e.t8},e.t10=(0,e.t1)(e.t2,e.t3,e.t9),(0,e.t0)(e.t10);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,a,r,s,c,i,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=O.instance,!O.isPromiseActive){e.next=17;break}return e.next=4,t.methods.getPromiseDetails().call({from:p.walletAddress});case 4:return n=e.sent,e.next=7,t.methods.getPotsDetails().call({from:p.walletAddress});case 7:if(a=e.sent,!n||!a){e.next=16;break}return r=n[2],s=n[5],c=a[0],i=a[1],o=a[2],u=s.map((function(e){return C(e)})),0==r&&G(),e.abrupt("return",{commitments:u,checks_left:r,pledgePot:c,rewardPot:i,penaltyPot:o});case 16:console.error("there was a problem with this request");case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(i.a)(l.a.mark((function e(t){var n,a,r,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),n=O.instance,a=h()().unix(),e.next=5,n.methods.checkCommitments(t,a).send({from:p.walletAddress}).on("error",(function(e,t){c(!1),console.error("error receipt",t)})).then(function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!1),B(),R(),console.log(t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:if(!(r=e.sent)){e.next=10;break}return console.log(r),s=r.transactionHash,o=r.events,e.abrupt("return",{transactionHash:s,events:o});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),t=O.instance,e.next=4,t.methods.cashOut().send({from:p.walletAddress}).on("error",(function(e,t){c(!1),console.error("error receipt",t)})).then(function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!1),B(),console.log(t),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:if(!(n=e.sent)){e.next=8;break}return a=n.transactionHash,r=n.events,e.abrupt("return",{transactionHash:a,events:r});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){w(Object(m.a)(Object(m.a)({},O),{},{checkOpen:null,checkClose:null}))};return Object(E.jsx)(U.Provider,{value:{userData:p,contractData:O,dAPPFunctions:{getAccount:g,forgetAccount:A},contractFactoryFunctions:{getContracts:T,createContract:P},contractFunctions:{selectContract:q,setNominee:L,createPromise:V,submitCheckIn:z,cashoutPromise:J,getPromisePrivateData:R},isLoading:s},children:t})},L=n(20),V=n(94),B=n.n(V);var R=function(e){var t=e.isValid,n=e.message,a=e.children,r=e.nohomepage;return Object(E.jsx)(E.Fragment,{children:t?Object(E.jsx)(E.Fragment,{children:a}):Object(E.jsxs)("div",{children:[Object(E.jsx)("h1",{children:n}),!r&&Object(E.jsx)(L.b,{to:"/","aria-disabled":!0,children:"Return to Homepage"})]})})},z=n(228),J=n.n(z);h.a.extend(B.a);var G=function(){var e=Object(a.useContext)(U),t=e.userData,n=t.walletAddress,r=t.contractAddresses,s=e.contractData,u=e.dAPPFunctions,j=u.getAccount,m=u.forgetAccount,b=e.contractFactoryFunctions.getContracts,f=e.contractFunctions.selectContract,y=Object(a.useState)({address:null,nominatedAddress:null,isPromiseActive:null,promiseDeadline:null,checkOpen:null,checkClose:null}),x=Object(o.a)(y,2),O=x[0],v=x[1],w=Object(a.useState)(!0),g=Object(o.a)(w,2),k=g[0],A=g[1];Object(a.useEffect)((function(){C(),v({address:s.address,nominatedAddress:s.nominatedAddress,isPromiseActive:s.isPromiseActive,promiseDeadline:s.promiseDeadline,checkOpen:s.checkOpen,checkClose:s.checkClose})}),[s,s.address]);var C=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J()();case 2:e.sent||A(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=O.address,D=O.nominatedAddress,S=O.isPromiseActive,_=O.promiseDeadline,N=O.checkOpen,M=O.checkClose;return Object(E.jsx)(R,{nohomepage:!0,isValid:k,message:"No provider detected! Download like MetaMask one to get started",children:Object(E.jsxs)("div",{children:[Object(E.jsxs)("header",{children:[Object(E.jsx)("h1",{children:Object(E.jsxs)(L.b,{to:"/",children:["Accountabil-",Object(E.jsx)("span",{className:"eth",children:"ETH"}),"-y \ud83e\udd1e\ud83c\udffe"]})}),Object(E.jsxs)("div",{className:"account-data",children:[Object(E.jsxs)("div",{className:"selected-contract-details",children:["Active Contract Details",P?Object(E.jsxs)("ul",{className:"promise-timings",children:[Object(E.jsxs)("li",{children:["Nominee:"," ",T(D)?D:"None"]}),Object(E.jsxs)("li",{children:["Promise Active: ",S?"true":"false"]}),S&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("li",{children:["Promise Deadline:"," ",h.a.unix(_).format("MMM D, YYYY h:mm A")]}),Object(E.jsxs)("li",{children:["Daily Check In Open :",N?h.a.unix(N).format("MMM D, YYYY h:mm A"):"not applicable"]}),Object(E.jsxs)("li",{children:["Daily Check In Close :",M?h.a.unix(M).format("MMM D, YYYY h:mm A"):"not applicable"]})]})]}):Object(E.jsx)("p",{children:"Please select a contract"})]}),Object(E.jsxs)("div",{className:"contract-wallet-details",children:[Object(E.jsxs)("div",{className:"user-wallet",children:["Selected Account:",n?Object(E.jsxs)("div",{children:[n,Object(E.jsx)("button",{onClick:m,children:"Forget Me"})]}):Object(E.jsx)("button",{onClick:j,children:"Connect your account!"})]}),Object(E.jsxs)("div",{className:"user-contractAddresses",children:[Object(E.jsxs)("div",{children:[Object(E.jsx)(d.a,{icon:p.b,size:"lg"}),"Selected Contract: ",P]}),Object(E.jsxs)("label",{children:["Choose a contract (oldest to newest created)",Object(E.jsxs)("select",{name:"contractAddresses",id:"contractAddresses",value:P||"",disabled:!r.length,onChange:function(e){return f(e.target.value)},children:[Object(E.jsx)("option",{value:"",defaultValue:!0,hidden:!0,children:r.length?"Please choose a contract":"Retrive your contractAddresses to begin"}),") (",r.map((function(e,t){return Object(E.jsxs)("option",{value:e,children:["[",t+1,"] ",e]},e)})),")"]}),Object(E.jsx)("button",{onClick:b,disabled:!n,children:r.length?Object(E.jsx)(d.a,{icon:p.d,size:"lg"}):Object(E.jsx)(d.a,{icon:p.c,size:"lg"})})]})]})]})]})]}),Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(c.a,{})})]})})},Z=n(229);var $=function(){return Object(E.jsxs)("div",{className:"loader-container",children:[Object(E.jsx)(Z.a,{color:"#ee811b",height:100,width:100}),Object(E.jsx)("h2",{children:"Waiting Transaction Approval and Submission"}),Object(E.jsx)("i",{children:"(Don't forget to approve or reject the transaction on your provider interface!)"})]})};var K=function(e){e.data;var t=e.success,n=e.children;return Object(E.jsx)(E.Fragment,{children:t?Object(E.jsxs)("div",{children:[Object(E.jsx)("h1",{children:"Success!"}),Object(E.jsx)("p",{children:"Your request has gone through, please see the changes below"}),Object(E.jsx)("div",{children:"[Transaction stuff here]"}),Object(E.jsx)(L.b,{to:"/","aria-disabled":!0,children:"Return to Start Page"})]}):Object(E.jsx)(E.Fragment,{children:n})})};var Q=function(){var e=Object(a.useContext)(U),t=e.contractData,n=t.isPromiseActive,r=t.address,s=e.contractFunctions.cashoutPromise,c=e.isLoading,u=Object(a.useState)(),d=Object(o.a)(u,2),p=d[0],j=d[1],m=Object(a.useState)(),b=Object(o.a)(m,2),h=b[0],f=b[1];Object(a.useEffect)((function(){j(c)}),[c]);var y=function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:(t=e.sent)&&!p?f(t):console.error("I think something went wrong 3");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(E.jsx)("main",{children:Object(E.jsx)(R,{isValid:r,message:"Please select a contract to begin or please create and then select one",children:Object(E.jsxs)(R,{isValid:n,message:"This contract doesn't have an active promise! Please create one first ",children:[p&&Object(E.jsx)($,{}),Object(E.jsxs)(K,{success:h&&h.events.cashOutSummary&&!p,data:h,children:[p&&Object(E.jsx)($,{}),"Click to cash out and close your promise",Object(E.jsx)("button",{onClick:y,children:"Request"})]})]})})})},X=n(63);var ee=function(e){var t=e.amount,n=Object(a.useState)(),r=Object(o.a)(n,2),s=r[0],c=r[1],u=Number(t);return Object(a.useEffect)((function(){function e(){return(e=Object(i.a)(l.a.mark((function e(){var t,n,a,r,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.coinbase.com/v2/exchange-rates?currency=ETH");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=n.data.rates,r=a.GBP,s=a.USD,i=a.EUR,c({GBP:r,USD:s,EUR:i});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()})),Object(E.jsx)("div",{children:s&&u>=0?Object(E.jsxs)("details",{children:[Object(E.jsx)("summary",{children:"See the exchange rate to Fiat currencies"}),Object(E.jsxs)("div",{children:["This amount is approximately equivalent to...",Object(E.jsxs)("div",{children:["GBP(\xa3):",P(t*s.GBP)," "]}),Object(E.jsxs)("div",{children:["USD($):",P(t*s.USD)," "]}),Object(E.jsxs)("div",{children:["EUR(\u20ac): ",P(t*s.EUR)]})]})]}):Object(E.jsx)("p",{children:"Please enter a valid amount of ETH to begin \ud83e\udd37\ud83d\udcb8"})})};h.a.extend(B.a);var te=function(){for(var e=[],t=0;t<30;t++)e.push(Object(E.jsx)("option",{value:t+1,children:t+1},"day"+t));return e};var ne=function(e){var t=e.handleSubmitForm,n=e.handleUpdateData,r=e.userPromiseData,s=e.error,c=Object(a.useState)({timeNow:h()().format("LL"),calculatedDeadline:void 0}),i=Object(o.a)(c,2),u=i[0],l=i[1];return Object(a.useEffect)((function(){r&&r.deadlineAsDaysAway&&l(Object(m.a)(Object(m.a)({},u),{},{calculatedDeadline:h()().add(r.deadlineAsDaysAway,"day").format("LL")}))}),[r]),Object(E.jsx)("div",{children:Object(E.jsxs)("form",{onSubmit:t,children:[Object(E.jsxs)("label",{children:["Commitments (please enter at least one)",r.userCommitments.map((function(e,t){return Object(E.jsx)("input",{type:"text",value:e,onChange:function(e){var a=r.userCommitments;a.splice(t,1,e.target.value),n(a,"userCommitments")}},"commit".concat(t))}))]}),Object(E.jsxs)("label",{children:["Deadline",Object(E.jsxs)("div",{children:[" Today is: ",u.timeNow]}),Object(E.jsx)("select",{id:"selectNumber",value:r.deadlineAsDaysAway,onChange:function(e){var t=Number(e.target.value);t&&n(t,"deadlineAsDaysAway")},children:te()}),"Your Deadline is:",u.calculatedDeadline]}),Object(E.jsxs)("label",{children:[Object(E.jsxs)("label",{children:["Wager(ETH): This is equivalent to",Object(E.jsx)("input",{type:"number",value:r.dailyWager,min:0,step:1e-4,onChange:function(e){return n(Number(e.target.value),"dailyWager")}}),Object(E.jsx)(ee,{amount:r.dailyWager})]}),Object(E.jsxs)("div",{children:["Total Pledge Pot:",Object(E.jsxs)("div",{children:[r.dailyWager?"".concat(r.dailyWager,"ETH "):"please set an amount ","x ",r.deadlineAsDaysAway," day(s) =",Number(r.dailyWager*r.deadlineAsDaysAway)?" ".concat(r.dailyWager*r.deadlineAsDaysAway," ETH"):Object(E.jsx)("p",{children:"Please fill out the missing info to get this total"})]}),Object(E.jsx)(ee,{amount:r.dailyWager*r.deadlineAsDaysAway})]})]}),s&&Object(E.jsx)("b",{children:"There is an error with your submission! Please enter these details correctly"}),Object(E.jsx)("input",{type:"submit"})]})})},ae=n(30),re=n.n(ae),se=re.a.object({userCommitments:re.a.array().items(re.a.string()).min(1).required(),deadlineAsDaysAway:re.a.number().less(31).positive().required(),dailyWager:re.a.number().greater(0).positive().required()}),ce=(re.a.object({userCommitments:re.a.array().items(re.a.string().hex()),deadline:re.a.number().positive(),dailyWager:re.a.number().greater(0).positive(),pledgePot:re.a.number()}),new y.a(y.a.givenProvider).utils.toWei),ie=function(){var e=Object(a.useContext)(U),t=e.contractData,n=t.address,r=t.isPromiseActive,s=t.nominatedAddress,c=e.contractFunctions.createPromise,u=e.isLoading,d=Object(a.useState)({userCommitments:new Array(3).fill(""),deadlineAsDaysAway:1,dailyWager:0}),p=Object(o.a)(d,2),j=p[0],b=p[1],f=Object(a.useState)(!1),y=Object(o.a)(f,2),x=y[0],O=y[1],v=Object(a.useState)(),w=Object(o.a)(v,2),g=w[0],k=w[1],C=Object(a.useState)(),P=Object(o.a)(C,2),T=P[0],D=P[1];Object(a.useEffect)((function(){k(u)}),[r,u]);var S=function(){var e=Object(i.a)(l.a.mark((function e(t){var n,a,r,s,i,o,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=se.validate(Object(m.a)(Object(m.a)({},j),{},{userCommitments:j.userCommitments.filter((function(e){return e.length}))})),a=n.error,r=n.value,!a){e.next=7;break}return O(!0),e.abrupt("return");case 7:return O(!1),s=r.userCommitments,i=r.dailyWager,o=r.deadlineAsDaysAway,u={commitments:(l=s,l.map((function(e){return A(e).padEnd(66,"0")}))),dailyWager:ce(i.toString()),deadline:h()().add(o,"day").unix(),totalPledgeAmount:ce((i*o).toString())},e.next=12,c(u);case 12:(d=e.sent)&&!g?D(d):console.error("I think something went wrong 4");case 14:case"end":return e.stop()}var l}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(E.jsx)("main",{children:Object(E.jsx)(R,{isValid:n,message:"Please select a contract to begin or please create and then select one",children:Object(E.jsx)(R,{isValid:!r,message:"This contract has an active promise! Please let it reach its deadline and cashout to define a new one",children:Object(E.jsx)(R,{isValid:!s,message:"Please set a nominee before you define a promise!",children:Object(E.jsxs)(K,{success:T&&!g,data:T,children:[g&&Object(E.jsx)($,{}),Object(E.jsx)(ne,{userPromiseData:j,handleSubmitForm:S,handleUpdateData:function(e,t){b(Object(m.a)(Object(m.a)({},j),{},Object(X.a)({},t,e)))},error:x})]})})})})})};var oe=function(){var e=Object(a.useContext)(U),t=e.userData,n=e.contractFactoryFunctions,r=n.createContract,s=n.getContracts,c=e.isLoading,u=Object(a.useState)(),d=Object(o.a)(u,2),p=d[0],j=d[1],m=Object(a.useState)(),b=Object(o.a)(m,2),h=b[0],f=b[1];Object(a.useEffect)((function(){j(c)}),[c]);var y=function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:(t=e.sent)&&!p?(f(t),console.log(t),s()):console.error("I think something went wrong 3");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(E.jsx)("main",{children:Object(E.jsxs)(R,{isValid:!!t.walletAddress,message:"Please connect your wallet to begin!",children:[p&&Object(E.jsx)($,{}),Object(E.jsxs)(K,{success:h&&!p,data:h,children:["Click to create your and deploy your Accountabil-ETH-y Smart Contract",Object(E.jsx)("button",{onClick:y,children:"Request"})]})," "]})})};var ue=function(){return Object(E.jsxs)("div",{children:["What do you want to do?",Object(E.jsx)("div",{children:Object(E.jsx)(L.b,{to:"/create-contract","aria-disabled":!0,children:"Create a New Contract"})}),"or",Object(E.jsxs)("div",{children:[Object(E.jsx)("i",{children:" Connect a Accountability Checker contract to access these"}),Object(E.jsxs)("ol",{children:[Object(E.jsx)("li",{children:Object(E.jsx)(L.b,{to:"/my-promise/nominate",children:"Nominate an Address"})}),Object(E.jsx)("li",{children:Object(E.jsx)(L.b,{to:"/my-promise/create",children:"Create Your Promise"})}),Object(E.jsx)("li",{children:Object(E.jsx)(L.b,{to:"/my-promise/check-in",children:" Daily Check In"})}),Object(E.jsx)("li",{children:Object(E.jsx)(L.b,{to:"/my-promise/cashout",children:"Cashout Promise"})})]})]})]})};var le=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(),c=Object(o.a)(s,2),u=c[0],d=c[1],p=Object(a.useState)(),j=Object(o.a)(p,2),m=j[0],b=j[1],h=Object(a.useContext)(U),f=h.contractData,y=f.address,x=f.nominatedAddress,O=f.isPromiseActive,v=h.contractFunctions.setNominee,w=h.isLoading;Object(a.useEffect)((function(){r(null),d(w)}),[y,w]);var g=function(){var e=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),T(n)&&console.error("This isnt a valid address"),e.next=4,v(n);case 4:(a=e.sent)&&!u?b(a):console.error("I think something went wrong 5");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(E.jsx)("main",{children:Object(E.jsx)(R,{isValid:y,message:"Please select a contract to begin or please create and then select one",children:Object(E.jsx)(R,{isValid:!O,message:"This contract has an active promise! Please let it expire and cashout to nominate a new address",children:Object(E.jsxs)(K,{success:m&&!u,data:m,children:[u&&Object(E.jsx)($,{}),Object(E.jsxs)("div",{className:"",children:[Object(E.jsx)("h1",{children:" Set your Nominee!"}),Object(E.jsxs)("p",{children:["Please provide a ETH account that will recieve the amount in your penalty pot.",Object(E.jsx)("br",{}),"You cannot nominate:"]}),Object(E.jsxs)("ul",{children:[Object(E.jsx)("li",{children:" Your currently connected wallet"}),Object(E.jsx)("li",{children:" This promise contract"})]}),Object(E.jsxs)("form",{onSubmit:g,children:[Object(E.jsxs)("p",{children:["Your current nominated address is:",Object(E.jsx)("b",{children:T(x)?Object(E.jsx)("span",{children:x}):Object(E.jsx)("span",{children:"NONE! Please set one before you set up your promise"})})]}),Object(E.jsxs)("label",{children:["Set your new nominee to recieve your penalty pot",Object(E.jsx)("input",{type:"text",name:"newNominee",required:!0,value:n,onChange:function(e){return r(e.target.value)},disabled:u})]}),Object(E.jsx)("input",{type:"submit",disabled:u})]})]})]})})})})},de=n(231),pe=new y.a(y.a.givenProvider).utils.fromWei;var je=function(e){var t=e.pots;return Object(E.jsxs)("div",{children:[Object(E.jsx)("h2",{children:"Current Pot Totals"}),Object(E.jsx)("div",{className:"promisePots",children:t&&t.map((function(e){return Object(E.jsxs)("span",{children:[Object(E.jsxs)("div",{children:[pe(Object.values(e)[0])," ETH"]}),Object(E.jsx)(d.a,{icon:p.a,size:"4x",color:"#a6c3dd9e"}),Object(E.jsx)("div",{children:Object.keys(e)})]},Object.keys(e))}))})]})},me=["commitments","checks_left"],be={commitments:[],pledgePot:null,rewardPot:null,penaltyPot:null};var he=function(){var e=Object(a.useState)(new Array(3).fill(!1)),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(be),c=Object(o.a)(s,2),u=c[0],d=c[1],p=Object(a.useState)(),j=Object(o.a)(p,2),b=j[0],h=j[1],f=Object(a.useState)(),y=Object(o.a)(f,2),x=y[0],O=y[1],v=Object(a.useContext)(U),w=v.contractData,g=w.address,k=w.isPromiseActive,A=v.contractFunctions,C=A.getPromisePrivateData,P=A.submitCheckIn,T=v.isLoading;Object(a.useEffect)((function(){D(),h(T)}),[g,T]);var D=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:(t=e.sent)?(n=t.commitments,a=t.checks_left,r=Object(de.a)(t,me),s=Object.entries(r).map((function(e){return Object(X.a)({},e[0],e[1])})),d(Object(m.a)(Object(m.a)({},u),{},{commitments:n,checksLeft:a,pots:s}))):console.error("I think something went wrong 1");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=n.every((function(e){return e})),e.next=4,P(a);case 4:(r=e.sent)&&!b?O(r):console.error("I think something went wrong 2");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(E.jsx)(R,{isValid:!!g,message:"Please select a contract to begin or please create and then select one",children:Object(E.jsx)(R,{isValid:k,message:"This contract doesn't have an active promise! Please create one first ",children:Object(E.jsxs)(K,{success:x&&!b,data:x,children:[b&&Object(E.jsx)($,{}),Object(E.jsxs)("main",{children:[Object(E.jsx)("h1",{children:" Submit Check"}),Object(E.jsx)(je,{pots:u.pots}),Object(E.jsxs)("form",{onSubmit:S,children:[Object(E.jsxs)("h2",{children:["Have you done what you promised? \ud83d\udc47 (",u.checksLeft," Checks Left)"]}),Object(E.jsx)("div",{className:"commitment-container",children:u.commitments.map((function(e,t){return Object(E.jsxs)("span",{className:"commitment",children:[Object(E.jsx)("input",{type:"checkbox",id:e,value:!0,onChange:function(e){return function(e,t){var a=n;a.splice(t,1,e),r(a)}(e.target.checked,t)}}),Object(E.jsxs)("label",{htmlFor:e,children:[" ",e]})]},"commitment".concat(t+1))}))}),Object(E.jsx)("input",{type:"submit",disabled:b})]})]})]})})})};var fe=function(){return Object(E.jsxs)("div",{children:["Sorry this page was not found. Do you want go back to the",Object(E.jsx)(L.b,{to:"/","aria-disabled":!0,children:"application homepage?"})]})};n(545);var ye=function(){return Object(E.jsx)(q,{children:Object(E.jsxs)(c.d,{children:[Object(E.jsxs)(c.b,{path:"/",element:Object(E.jsx)(G,{}),children:[Object(E.jsx)(c.b,{index:!0,element:Object(E.jsx)(ue,{})}),Object(E.jsx)(c.b,{path:"create-contract",element:Object(E.jsx)(oe,{})}),Object(E.jsxs)(c.b,{path:"my-promise",children:[Object(E.jsx)(c.b,{exact:!0,path:"create",element:Object(E.jsx)(ie,{})}),Object(E.jsx)(c.b,{exact:!0,path:"nominate",element:Object(E.jsx)(le,{})}),Object(E.jsx)(c.b,{exact:!0,path:"check-in",element:Object(E.jsx)(he,{})}),Object(E.jsx)(c.b,{exact:!0,path:"cashout",element:Object(E.jsx)(Q,{})}),Object(E.jsx)(c.b,{index:!0,element:Object(E.jsx)(fe,{})})]})]}),Object(E.jsx)(c.b,{path:"*",element:Object(E.jsx)(fe,{})})]})})},xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,557)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};n(546),n(552);s.a.render(Object(E.jsx)(L.a,{children:Object(E.jsx)(ye,{})}),document.getElementById("root")),xe()}},[[553,1,2]]]);
//# sourceMappingURL=main.8e1f0459.chunk.js.map